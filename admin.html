<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>NBV Admin - Gerador de Clientes</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <style>body { padding-top: 20px; max-width: 800px; margin: 0 auto; }</style>
</head>
<body>
    <div class="card">
        <h1>‚öôÔ∏è Gerador Studio NBV</h1>
        <p>Preencha os dados e clique em "Gerar Pacote do Cliente".</p>
        
        <label>Nome do Cliente</label>
        <input type="text" id="cliName" placeholder="Ex: Maria e Jo√£o">

        <label>Links das Fotos (Alta Resolu√ß√£o - Um por linha)</label>
        <textarea id="cliFotos" rows="5" placeholder="https://..."></textarea>
        
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div>
                <label>Fotos Inclusas (Pacote)</label>
                <input type="number" id="cliInc" value="0">
            </div>
            <div>
                <label>Valor Foto Extra (R$)</label>
                <input type="number" id="cliExtra" value="15.00">
            </div>
        </div>

        <h3>Log√≠stica</h3>
        <label>Taxa de Envio/Transportadora (R$)</label>
        <input type="number" id="taxaEnvio" value="30.00">
        
        <label>Locais de Retirada (Um por linha)</label>
        <textarea id="locaisRetirada" rows="3">Studio NBV (Boa Ventura)
Balc√£o Ibema (Centro)
Turvo (Pra√ßa Central)</textarea>

        <h3>Financeiro</h3>
        <label>Desconto Pix (%)</label>
        <input type="number" id="descPix" value="5">
        
        <label>Juros Maquininha (Separar por v√≠rgula: 1x, 2x... 12x)</label>
        <input type="text" id="jurosTable" value="0, 4.59, 5.99, 7.49, 8.99, 10.49, 11.99, 13.49, 14.99, 16.49, 17.99, 21.00">

        <button class="btn btn-primary" onclick="gerarPacote()">üì¶ BAIXAR PACOTE DO CLIENTE (.ZIP)</button>
    </div>

    <script>
        function gerarPacote() {
            const zip = new JSZip();
            
            // Pega os dados
            const config = {
                cliente: document.getElementById('cliName').value,
                fotos: document.getElementById('cliFotos').value.split('\n').filter(x => x.trim()),
                pacote: { 
                    incluso: Number(document.getElementById('cliInc').value),
                    extra: Number(document.getElementById('cliExtra').value)
                },
                logistica: {
                    envio: Number(document.getElementById('taxaEnvio').value),
                    locais: document.getElementById('locaisRetirada').value.split('\n').filter(x => x.trim())
                },
                financeiro: {
                    pixDesc: Number(document.getElementById('descPix').value),
                    juros: document.getElementById('jurosTable').value.split(',').map(Number)
                }
            };

            // Gera o arquivo de configura√ß√£o JS
            const configJS = `window.NBV_CONFIG = ${JSON.stringify(config, null, 2)};`;
            
            // Adiciona ao ZIP (N√ÉO ADICIONA OS ARQUIVOS DO SISTEMA, O CLIENTE BAIXA DO GITHUB)
            // OBS: Warrior, aqui a l√≥gica √©: voc√™ baixa o ZIP com o "config_cliente.js"
            // e coloca na pasta do Netlify junto com os arquivos do sistema que vou te passar na Parte 2.
            
            // Melhor: O Admin gera APENAS o config.js.
            // Voc√™ ter√° uma pasta "Mestre" no seu PC com o sistema.
            // Para cada cliente, voc√™ copia a pasta Mestre, joga esse config.js dentro e sobe.
            
            const blob = new Blob([configJS], {type: "text/javascript;charset=utf-8"});
            saveAs(blob, "config_cliente.js");
            
            alert("Arquivo 'config_cliente.js' gerado! Coloque-o na mesma pasta do index.html.");
        }
    </script>
</body>
</html>
